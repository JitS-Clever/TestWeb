<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Template Showcase</title>
    <link rel="stylesheet" href="css/inappstyles.css">
    <link rel="stylesheet" href="css/editor.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <script src="/TestWeb/js/bootstrap.min.js"></script>
    <script src="/TestWeb/js/auth.js"></script>
    <script src="/TestWeb/js/editor.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.39.0/min/vs/loader.min.js"></script>

    <script type="text/javascript">
          var clevertap = {event:[], profile:[], account:[], onUserLogin:[], notifications:[], privacy:[]};
          clevertap.account.push({"id": "75R-654-5Z6Z"});
          clevertap.privacy.push({optOut: false}); 
          clevertap.privacy.push({useIP: true});
          clevertap.dismissSpamControl = true;
          (function () {
              var wzrk = document.createElement('script');
              wzrk.type = 'text/javascript';
              wzrk.async = true;
              wzrk.src="https://d2r1yp2w7bby2u.cloudfront.net/js/clevertap.min.js";
              var s = document.getElementsByTagName('script')[0];
              s.parentNode.insertBefore(wzrk, s);
          })();
      
          const searchParams = new URLSearchParams("key1=value1&key2=value2");
      
        // Log the values
        searchParams.forEach((value, key) => {
            console.log(value, key);
        });
      
        const url = new URL(document.location).searchParams;
        console.log(url);
        var pageDict = {};
        url.forEach((value, key) => {
            pageDict[key] = value;
            console.log(value, key);
        });
        if(pageDict != null)
        {
            clevertap.event.push("Page Viewed", pageDict);
        }
        else{
            clevertap.event.push("Page Viewed");
        }
      </script>

<script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5SLRV86');
</script>
  <!-- End Google Tag Manager -->  

</head>
<body>
    <div id="loginOverlay" class="login-overlay">
        <div class="login-container">
            <div id="loginFormHeader">
                <h2>Get access to Template Showcase</h2>
                <p>To get started, please enter your email.</p>
            </div>
            <div id="loginForm">
                <div class="form-group mb-3">
                    <label for="emailInput">Work Email <span class="text-danger">*</span></label>
                    <input type="email" class="form-control" id="emailInput" placeholder="your@email.com" required>
                </div>
                <div class="d-flex justify-content-end mt-3">
                    <button class="btn btn-warning" onclick="checkAccess()">Sign In</button>
                </div>
            </div>
            
            <div id="requestAccessForm" style="display: none;">
                <h3>Request Access</h3>
                <p>Please provide the following details to get access to Template Showcase.</p>
                <div class="form-group mb-2">
                    <label for="nameInput">Full Name <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" id="nameInput" placeholder="John Doe" 
                           required pattern="^[A-Za-z\s\.\-]+$" 
                           title="Name should only contain letters, spaces, dots, and hyphens">
                    <div class="invalid-feedback">Please provide a valid name (only letters, spaces, dots, and hyphens allowed).</div>
                </div>
                <div class="form-group mb-2">
                    <label for="companyInput">Company Name <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" id="companyInput" placeholder="Your company name" required>
                    <div class="invalid-feedback">Please provide your company name.</div>
                </div>
                <div class="form-group mb-2">
                    <label for="jobTitleInput">Job Title <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" id="jobTitleInput" placeholder="Your job role" required>
                    <div class="invalid-feedback">Please provide your job title.</div>
                </div>
                <div class="form-group mb-2">
                    <label for="pocInput">Point of Contact Email <span class="text-danger">*</span></label>
                    <input type="email" class="form-control" id="pocInput" placeholder="contact@company.com" required>
                    <div class="invalid-feedback">Please provide a valid email address for your point of contact.</div>
                </div>
                <div class="form-group mb-3">
                    <label for="requestEmailInput">Email Address <span class="text-danger">*</span></label>
                    <input type="email" class="form-control disabled-field" id="requestEmailInput" disabled>
                </div>
                <div class="d-flex justify-content-between mt-3">
                    <button class="btn btn-light" onclick="showLoginForm()">Back to Login</button>
                    <button class="btn btn-warning" onclick="requestAccess()">Submit Request</button>
                </div>
            </div>
        </div>
    </div>
    <header>
        <div class="navbar">
            <div class="logo">TemplateShowcase</div>
            <!-- <div class="nav-links">
                <a href="#">HTML Code</a>
                <a href="#">Mobile View</a>
            </div> -->
            <div class="nav-right">
                <div id="userInfo" style="display: none;">
                    <span id="userEmail" class="user-email"></span>
                    <button class="btn btn-sm btn-outline-light" onclick="logout()">Logout</button>
                </div>
                <!-- <a href="#">Template Selection</a> -->
            </div>
        </div>
    </header>

    <div class="template">
        <h1>Choose a template</h1>
        <p>Experience our templates</p>
        <div class="dropdowns">
            <div class="dropdown" id="templateType">
                <button class="btn btn-warning dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                  Template Type
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                  <!-- Dynamically generated list items will go here -->
                </ul>
              </div>
        </div>
    </div>
    
    <main>
        <div class="container">
            <div class="row">
                <div class="col-md-8">
                        <div class="filters p-5">
                            <h2 class="mb-4">Edit Content for Template.</h2>
                            <div id="dynamicContent"></div>
                            <button type="button" class="btn btn-light me-4" onclick="location.reload()">RESET</button>
                            <button type="button" class="btn btn-warning" onclick="fetchFormData()">Apply filters</button>
                        </div>
                </div>
                <div class="col-md-4">
                    <div class="phone-preview-wrapper">
                    <section class="phone-preview" id="phonePreview">
<!--                         <button id="floatToggleBtn" class="float-toggle-btn" title="Toggle floating mode">
                            ðŸ“Œ
                        </button> -->
                        <div class="phone-frame">
                            <div class="device-container">
                                <iframe id="codeIframe" src="about:blank" class="iframe"></iframe>
                            </div>
                        </div>
                        <div class="preview-notification">
                            This preview does not support in-app closure and redirection but the code works well with real world devices.
                        </div>
                    </section>
                    </div>
                </div>
            </div>
        </div>
        <section class="code-container mt-5">
            <div class="code-header">
                <span>Generated Code</span>
                <button class="copy-btn" onclick="copyCode()">Copy</button>
                <button class="load-btn" onclick="loadIframe()">Load in Iframe</button>
            </div>
            <textarea id="codeBlock" class="code-block" spellcheck="false">
                // Your code goes here...
            </textarea>
        </section>
    </main>
    <footer>
        <div class="footer-content">
            <div class="footer-info">
                <p>TemplateShowcase</p>
                <p>Easy helper for CleverTap In App Templates.</p>
                <p>Use this with caution, this is just to help create the html code and its elements. It is advised to test this internally as well before taking it live on a campaign.</p>
            </div>
            <div class="footer-contact">
                <p>FAQ</p>
                <p>Get help anytime</p>
                <p>For Support: Contact your TAM & CSM</p>
                <p>Email: help@clevertap.com</p>
            </div>
        </div>
    </footer>
    <script src="js/inapp.js"></script>
</body>
</html>
